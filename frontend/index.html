<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="World Sense - Global Economic Intelligence Monitor. Real-time economic sentiment analysis and news summaries for 195 countries.">
    <meta name="keywords"
        content="world sense, economic analysis, global economy, sentiment analysis, GDP, inflation, financial news">
    <meta name="author" content="World Sense">

    <!-- Open Graph / Social Media -->
    <meta property="og:title" content="World Sense - Global Economic Intelligence">
    <meta property="og:description"
        content="Real-time economic sentiment analysis and news summaries for 195 countries.">
    <meta property="og:type" content="website">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ“Š</text></svg>">

    <title>World Sense - Global Economic Intelligence</title>
    <link rel="stylesheet" href="./styles.css?v=3">

    <!-- Material 3 Dependencies -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
        rel="stylesheet">

    <!-- Markdown & Syntax Highlighting -->
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js"></script>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- Map Dependencies -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsvectormap/dist/css/jsvectormap.min.css" />
</head>

<body>
    <div class="app-container">
        <header class="header">
            <div class="header-content">
                <h1 class="logo" id="logoHome" style="cursor: pointer;">
                    <span class="material-symbols-outlined logo-icon">public</span>
                    World Sense
                </h1>
                <span class="tagline">Global Economic Intelligence</span>
            </div>
            <div class="header-actions">
                <div class="search-container">
                    <span class="material-symbols-outlined search-icon">search</span>
                    <input type="text" id="countrySearch" placeholder="Search country..." class="search-input"
                        autocomplete="off">
                    <div id="searchSuggestions" class="search-suggestions hidden"></div>
                </div>
                <button id="scrapeBtn" class="btn btn-primary">
                    <span class="material-symbols-outlined">refresh</span>
                    Refresh Now
                </button>
                <button id="exportBtn" class="btn btn-secondary" title="Export Data">
                    <span class="material-symbols-outlined">download</span>
                    Export
                </button>
                <button id="themeToggle" class="btn btn-icon">
                    <span id="themeIcon" class="material-symbols-outlined">dark_mode</span>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Map View -->
            <section id="mapView" class="map-section">
                <div class="section-header">
                    <h2 class="section-title">Global Economic Analysis</h2>
                    <p class="section-subtitle">Select a country to view economic signals</p>
                    <p class="last-updated" id="lastUpdated">Loading data...</p>
                </div>

                <!-- Dashboard Stats Cards -->
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-icon positive">
                            <span class="material-symbols-outlined">trending_up</span>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="positiveCount">-</span>
                            <span class="stat-label">Positive Outlook</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon negative">
                            <span class="material-symbols-outlined">trending_down</span>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="negativeCount">-</span>
                            <span class="stat-label">Negative Outlook</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon neutral">
                            <span class="material-symbols-outlined">public</span>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="totalCountries">-</span>
                            <span class="stat-label">Countries Analyzed</span>
                        </div>
                    </div>
                    <div class="stat-card clickable" onclick="showTopMovers()">
                        <div class="stat-icon highlight">
                            <span class="material-symbols-outlined">insights</span>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value">View</span>
                            <span class="stat-label">Top Movers â†’</span>
                        </div>
                    </div>
                </div>

                <!-- Loading Overlay -->
                <div id="mapLoadingOverlay" class="map-loading-overlay hidden">
                    <div class="loading-spinner"></div>
                    <p class="loading-text">Analyzing global sentiment...</p>
                </div>

                <div id="world-map" class="map-container" style="height: 700px;"></div>

                <!-- Sentiment Legend -->
                <div class="sentiment-legend">
                    <span class="legend-label">Economic Sentiment:</span>
                    <div class="legend-scale">
                        <div class="legend-item">
                            <span class="legend-color" style="background: #b91c1c;"></span>
                            <span>Very Negative</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color" style="background: #ef4444;"></span>
                            <span>Negative</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color" style="background: #86efac;"></span>
                            <span>Positive</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color" style="background: #16a34a;"></span>
                            <span>Very Positive</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Calendar View (Hidden by default, shown when country selected) -->
            <section id="calendarView" class="calendar-section hidden">
                <div class="calendar-header">
                    <button id="backToMap" class="btn btn-secondary">
                        <span class="material-symbols-outlined">public</span>
                        Back to Map
                    </button>
                    <div class="header-right">
                        <div class="date-picker-container" id="datePickerContainer">
                            <span class="material-symbols-outlined">calendar_today</span>
                            <input type="month" id="datePicker" class="date-picker-input">
                        </div>
                    </div>
                </div>
                <div class="country-header">
                    <div class="country-title-group">
                        <h2 id="selectedCountryName">Global</h2>
                        <button id="shareBtn" class="btn btn-icon-small" title="Copy share link">
                            <span class="material-symbols-outlined">share</span>
                        </button>
                    </div>
                    <span class="last-updated-label">Last updated: <span id="lastUpdatedDate">-</span></span>
                </div>

                <!-- Country Overview: Summary and Signals -->
                <div id="countryOverview" class="country-overview hidden">
                    <!-- AI Summary -->
                    <div id="countrySummaryCard" class="summary-card hidden">
                        <div class="card-header">
                            <h3>
                                <span class="material-symbols-outlined">description</span>
                                Economic Analysis Summary
                            </h3>
                            <div class="header-right">
                                <span class="summary-date" id="summaryDateLabel"></span>
                                <button id="regenerateSummaryBtn" class="btn btn-outline-sm" title="Regenerate Summary"
                                    style="margin-left: 10px; padding: 4px 8px; font-size: 0.8rem;">
                                    <span class="material-symbols-outlined" style="font-size: 16px;">refresh</span>
                                    Regenerate
                                </button>
                            </div>
                        </div>
                        <div id="countrySummaryContent" class="summary-content markdown-content"></div>
                    </div>

                    <!-- Generate Summary Placeholder (Shown when no summary exists) -->
                    <div id="generateSummaryPlaceholder" class="card hidden"
                        style="text-align: center; padding: 40px 20px;">
                        <span class="material-symbols-outlined"
                            style="font-size: 48px; color: var(--md-sys-color-outline); margin-bottom: 16px;">analytics</span>
                        <h3 style="margin-bottom: 8px;">No Analysis Available</h3>
                        <p style="color: var(--md-sys-color-on-surface-variant); margin-bottom: 24px;">Generate an
                            AI-powered economic summary for this month.</p>
                        <button id="createSummaryBtn" class="btn btn-primary">
                            <span class="material-symbols-outlined">auto_awesome</span>
                            Generate Summary
                        </button>
                    </div>

                    <!-- Articles List -->
                    <div id="countryArticlesSection" class="articles-section">
                        <div class="card-header">
                            <h3>
                                <span class="material-symbols-outlined">newspaper</span>
                                Recent Signals
                            </h3>
                            <span id="countryArticleCount" class="badge">0 articles</span>
                        </div>
                        <div id="countryArticlesList" class="articles-list"></div>
                    </div>
                </div>
            </section>

            <!-- Daily View -->
            <section id="dailyView" class="daily-section hidden">
                <div class="daily-header">
                    <button id="backToCalendar" class="btn btn-secondary">
                        <span class="material-symbols-outlined">arrow_back</span>
                        Back to Calendar
                    </button>
                    <h2 id="selectedDate" class="daily-title"></h2>
                    <button id="generateSummaryBtn" class="btn btn-primary">
                        <span class="material-symbols-outlined">auto_awesome</span>
                        Generate Summary
                    </button>
                </div>

                <div class="daily-content">
                    <!-- AI Summary -->
                    <div id="summaryCard" class="summary-card hidden">
                        <div class="card-header">
                            <h3>
                                <span class="material-symbols-outlined">description</span>
                                AI-Generated Summary
                            </h3>
                        </div>
                        <div id="summaryContent" class="summary-content markdown-content"></div>
                    </div>

                    <!-- Articles List -->
                    <div id="articlesSection" class="articles-section">
                        <div class="card-header">
                            <h3>
                                <span class="material-symbols-outlined">newspaper</span>
                                News Articles
                            </h3>
                            <span id="articleCount" class="badge">0 articles</span>
                        </div>
                        <div id="articlesList" class="articles-list"></div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Loading Overlay -->
        <div id="loadingOverlay" class="loading-overlay hidden">
            <div class="loading-spinner"></div>
            <p id="loadingText">Loading...</p>
        </div>

        <!-- Toast Notification -->
        <div id="toast" class="toast hidden">
            <span id="toastMessage"></span>
        </div>
    </div>

    <!-- Map Dependencies - Load before app.js -->
    <!-- Map Libraries (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/jsvectormap/dist/js/jsvectormap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsvectormap/dist/maps/world.js"></script>
    <!-- Main App Logic -->
    <script src="./app.js?v=12"></script>
</body>

</html>